/**
 * vue-lang-router v1.3.1
 * (c) 2021 Radek Altof
 * Released under the MIT License.
 */

var LangRouter=function(t,e,n){"use strict";function r(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var a=r(e),o=r(n);var i=Object.assign||function(){for(var t=arguments,e={},n=0;n<arguments.length;n++){var r=t[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e};function s(t,e,n,r,a,o,i,s,l,u){"boolean"!=typeof i&&(l=s,s=i,i=!1);var c,f="function"==typeof n?n.options:n;if(t&&t.render&&(f.render=t.render,f.staticRenderFns=t.staticRenderFns,f._compiled=!0,a&&(f.functional=!0)),r&&(f._scopeId=r),o?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(o)},f._ssrRegister=c):e&&(c=i?function(t){e.call(this,u(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,s(t))}),c)if(f.functional){var d=f.render;f.render=function(t,e){return c.call(e),d(t,e)}}else{var h=f.beforeCreate;f.beforeCreate=h?[].concat(h,c):[c]}return n}var l,u,c,f=s({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("router-link",t._b({attrs:{to:t.localizedTo()}},"router-link",t.$attrs,!1),[t._t("default")],2)},staticRenderFns:[]},undefined,{name:"LocalizedLink",props:["to"],methods:{localizedTo:function(){if("string"==typeof this.to)return this.$localizePath(this.to);if("object"==typeof this.to&&"string"==typeof this.to.path){var t=JSON.parse(JSON.stringify(this.to));return t.path=this.$localizePath(t.path),t}return this.to}}},undefined,false,undefined,!1,void 0,void 0,void 0),d=s({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)(t.getTag(),{tag:"component",staticClass:"router-language-switcher"},[t._t("default",null,{links:t.links})],2)},staticRenderFns:[]},undefined,{name:"LanguageSwitcher",data:function(){return{currentUrl:this.url||this.$router.currentRoute.fullPath||this.$router.currentRoute.value.fullPath,links:[]}},props:["tag","active-class","url"],methods:{getTag:function(){return this.tag?this.tag:"div"},generateLinks:function(){var t=[],e=this.activeClass||"router-active-language",n=this._langRouter.translations;for(var r in n)n.hasOwnProperty(r)&&t.push({activeClass:r==this.$i18n.locale?e:"",langIndex:r,langName:n[r].name||r,url:this.$localizePath(this.currentUrl,r)});this.links=t}},watch:{$route:function(t){this.currentUrl=this.url||t.fullPath,this.generateLinks()}},mounted:function(){this.generateLinks()}},undefined,false,undefined,!1,void 0,void 0,void 0);t.i18n=void 0;var h=[];function p(t,e){console.error("LangRouter: "+t),void 0!==e&&console.error(e)}var g=function(t){for(var e in u)u.hasOwnProperty(e)&&!c[e]&&(c[e]={});for(var n in c)c.hasOwnProperty(n)&&y(t.routes,n);var r=new o.default(t);return r.beforeEach(m),r};function v(e){return t.i18n.locale=e,document.querySelector("html").setAttribute("lang",e),localStorage.setItem("VueAppLanguage",e),e}function y(t,e,n){t.forEach((function(t){var r=_(t.path,e);n||(r="/"+e+("/"!=r.charAt(0)?"/":"")+r),t.alias?Array.isArray(t.alias)||(t.alias=[t.alias]):t.alias=[],t.path!=r&&-1==t.alias.indexOf(r)&&t.alias.push(r),t.children&&y(t.children,e,!0)}))}function m(e,n,r){var a=e.path.split("/")[1];if(!u[a]){var o=localStorage.getItem("VueAppLanguage");if(o&&u[o])a=o;else{var i=function(){function t(t){return t.split("-")[0].toLowerCase()}if(navigator.languages&&navigator.languages.length)return t(navigator.languages[0]||"");return t(navigator.language||navigator.browserLanguage||navigator.userLanguage||"")}();a=i&&u[i]?i:l}if(a!=l){var s=_(e.path,a);return s="/"+a+("/"!=s.charAt(0)?"/":"")+s,r({path:s,query:e.query,hash:e.hash})}}(function(e){return h.includes(e)?Promise.resolve(v(e)):(u[e]&&"function"==typeof u[e].load||p('Unable to load translations for "'+e+'", "load" function is missing!'),u[e].load().then((function(n){return t.i18n.setLocaleMessage(e,n.default||n),h.push(e),v(e)})).catch((function(t){p('Failed to load "'+e+'" translation.',t)})))})(a).then((function(){return r()}))}function _(t,e,n,r){var a=t.split("/");if(n&&c[n]){if(e==n)return t;var o=c[n],i={};Object.keys(o).forEach((function(t){i[o[t]]=t}));for(var s=r.split("/"),l=0;l<a.length;l++){var u=a[l];":"!=s[l].charAt(0)&&(a[l]=i[u]||u)}}for(var f=0;f<a.length;f++){var d=a[f];":"!=d.charAt(0)&&(a[f]=c[e][d]||d)}return a.join("/")}function b(e,n){n&&c[n]||(n=t.i18n.locale);var r=e,a="";e.includes("?")?(r=e.split("?")[0],a="?"+e.split("?")[1]):e.includes("#")&&(r=e.split("#")[0],a="#"+e.split("#")[1]);var o=r.split("/"),i=!!c[o[1]]&&o[1],s=this.$router.currentRoute.path.split("/")[1];if(n==l&&!c[s]&&!i)return e;var u=!1;if(i){var f=this.$router.resolve(r);0!=f.route.matched.length?u="/"==(u=f.route.matched[f.route.matched.length-1].path).charAt(0)?u:"/"+u:p('Router could not resolve path "'+r+'". URL localization may not work as expected.'),o.splice(1,1),r=o.join("/")}var d=_(r,n,i,u||r);return(d="/"+n+("/"!=d.charAt(0)?"/":"")+d)+a}return g.install=function(e,n){if(g.installed)p("Already installed.");else{var r;g.installed=!0,n||p("Options missing."),l=n.defaultLanguage,u=n.translations,c=n.localizedURLs||{},((r=Array.isArray(u))||"object"!=typeof u)&&p("options.translations should be an object, received "+(r?"array":typeof u)+" instead."),((r=Array.isArray(c))||"object"!=typeof c)&&p("options.localizedURLs should be an object, received "+(r?"array":typeof c)+" instead."),"string"!=typeof l&&p("options.defaultLanguage should be a string, received "+typeof l+" instead."),e.use(a.default),e.use(o.default);var s={};for(var v in u)if(u.hasOwnProperty(v)){var y=u[v].messages;"object"!=typeof y||Array.isArray(y)||(s[v]=u[v].messages,h.push(v))}t.i18n=new a.default(i({},{locale:l,fallbackLocale:l,messages:s},n.i18nOptions)),e.prototype._langRouter={translations:u},e.prototype.$localizePath=b,e.component("localized-link",f),e.component("language-switcher",d)}},"undefined"!=typeof window&&window.Vue&&window.Vue.use(g),t.default=g,Object.defineProperty(t,"__esModule",{value:!0}),t}({},VueI18n,VueRouter);
